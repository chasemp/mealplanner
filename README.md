# 🍽️ MealPlanner - Smart Meal Planning PWA

A modern, offline-first Progressive Web App for meal planning with local SQLite storage, recipe management, and smart rotation features.

## 🚀 **Live Demo**
**[https://mealplanner.523.life/](https://mealplanner.523.life/)** - Full-featured PWA

📱 **Offline-First** • 🗄️ **Local SQLite Database** • ⚡ **Zero Backend Dependencies**

---

## ✨ **Features**

### 🎯 **Core Features**
- **Meal Planning** - Plan meals for weeks or months ahead
- **Recipe Management** - Store and organize your favorite recipes
- **Smart Rotation** - Intelligent meal rotation engine
- **Grocery Lists** - Auto-generated shopping lists from meal plans
- **Pantry Management** - Track items you have on hand
- **Barcode Scanner** - Quick item entry (PWA-enabled)
- **Calendar View** - Visual meal planning interface
- **Itinerary View** - Day-by-day meal schedules

### 📱 **PWA Features**
- **100% Offline** - Works completely offline with service worker
- **Local Database** - SQLite via sql.js (no server required)
- **Installable** - Add to home screen on any device
- **Fast & Responsive** - Optimized for mobile and desktop
- **Export/Import** - Backup and restore your data

### 🏗️ **Technical Features**
- **SQL.js Integration** - Full SQLite in the browser (WebAssembly)
- **Demo Data System** - Realistic test data for development
- **Comprehensive Testing** - Unit, integration, and E2E tests
- **Mobile-First Design** - Touch-optimized interface
- **Conditional Logging** - Silent in production

---

## 🏁 **Quick Start**

### **Development**
```bash
# Install dependencies
npm install

# Start development server (port 3004)
npm run dev

# Open browser
open http://localhost:3004
```

### **Production**
```bash
# Build for production
npm run build

# Preview production build
npm run preview

# Deploy (just push to main)
git add -A
git commit -m "feat: your changes"
git push origin main  # Auto-deploys to mealplanner.523.life
```

### **Port Management**
```bash
# Check assigned port
npm run port

# Check if port 3004 is free
npm run port:check

# Kill process on port 3004
npm run port:kill

# Force restart (kill + start)
npm run port:force
```

---

## 📂 **Project Structure**

Following the `/src` → `/docs` deployment pattern ([see guide](../peadoubleueh/project-docs/DEPLOYMENT_ARCHITECTURE.md)):

```
MealPlanner/
├── src/                  # Source code (edit here)
│   ├── index.html        # Main app entry
│   ├── sw.js             # Service worker
│   ├── js/               # JavaScript modules
│   │   ├── main.js       # App entry point
│   │   ├── meal-manager.js
│   │   ├── recipe-manager.js
│   │   ├── grocery-list-manager.js
│   │   └── [15+ more modules]
│   ├── components/       # Reusable components
│   ├── database/         # SQLite schema & storage
│   ├── utils/            # Utilities (Logger, EventHelper)
│   ├── styles/           # CSS files
│   └── test/             # Test files
│       ├── unit/
│       ├── integration/
│       ├── regression/
│       └── e2e/
│
├── public/               # Static assets (copied to build)
│   ├── manifest.json     # PWA manifest
│   └── CNAME             # Custom domain config
│
├── docs/                 # Build output (auto-generated)
│   └── [Built files]     # GitHub Pages serves from here
│
├── project-docs/         # Project documentation
│   ├── DEPLOYMENT.md
│   ├── TESTING_STRATEGY.md
│   ├── USER_MANUAL.md
│   └── [8 more docs]
│
├── vite.config.js        # Vite build configuration
├── package.json          # Dependencies and scripts
└── README.md             # This file
```

### **⚠️ Critical Rules**
1. **NEVER edit `/docs` directly** - it's auto-generated by `npm run build`
2. **Always edit source files** in `/src` or `/public`
3. **GitHub Pages** automatically serves from `/docs` on push to main
4. **No GitHub Actions needed** - simple push deployment

---

## 🛠️ **Technology Stack**

- **Frontend**: Vanilla JavaScript (modular architecture)
- **Database**: [SQL.js](https://github.com/sql-js/sql.js/) - SQLite compiled to WebAssembly
- **Styling**: Tailwind CSS (compiled)
- **Build Tool**: [Vite](https://vitejs.dev/) - Fast dev server and optimized builds
- **Testing**: 
  - [Vitest](https://vitest.dev/) - Unit & integration tests
  - [Playwright](https://playwright.dev/) - E2E testing
- **PWA**: Service Worker + Web App Manifest
- **Deployment**: GitHub Pages - Simple static hosting

---

## 🧪 **Testing**

### **Run Tests**
```bash
# All tests
npm test

# Unit tests only
npm run test:run

# Core functionality tests
npm run test:core

# E2E tests
npm run test:e2e

# E2E with UI
npm run test:e2e:ui

# Full test suite
npm run test:all
```

### **Test Structure**
- **Unit Tests** - Individual module testing (`src/test/unit/`)
- **Integration Tests** - Component interaction (`src/test/integration/`)
- **Regression Tests** - Prevent known bugs (`src/test/regression/`)
- **E2E Tests** - Full workflow testing (`src/test/e2e/`)

### **Pre-Commit Hook**
- Automatically runs critical regression tests
- Prevents breaking changes
- Setup: `npm run hooks:setup`

---

## 🔧 **Development Workflow**

### **1. Make Changes**
Edit files in `/src`:
- Main app logic: `/src/js/*.js`
- Database: `/src/database/*.js`
- Components: `/src/components/*.js`
- Styles: `/src/styles/*.css`

### **2. Test Locally**
```bash
npm run dev  # http://localhost:3004
```

### **3. Run Tests**
```bash
npm run test:core  # Quick core tests
npm run test:all   # Full test suite
```

### **4. Build for Production**
```bash
npm run build  # Outputs to /docs
```

### **5. Deploy**
```bash
git add -A
git commit -m "feat: your feature"
git push origin main  # Live at mealplanner.523.life
```

---

## 📚 **PWA Best Practices**

This project follows PWA best practices from [peadoubleueh/project-docs](../peadoubleueh/project-docs/):

✅ **Offline-First** - Service worker caching  
✅ **Local Database** - SQL.js for offline data  
✅ **Mobile-First** - Touch-optimized design  
✅ **Page-Based Navigation** - Better UX than modals  
✅ **Conditional Logging** - Logger utility (silent in production)  
✅ **Port Management** - No conflicts with other PWAs  
✅ **Comprehensive Testing** - Unit, integration, E2E  

See the [PWA Development Lessons](../peadoubleueh/project-docs/PWA_DEVELOPMENT_LESSONS.md) for complete guidance.

---

## 📊 **Database**

### **SQLite via SQL.js**
- **Completely offline** - No server required
- **Fast queries** - WebAssembly performance
- **Full SQL** - Complete SQLite feature set
- **Portable** - Export/import your data

### **Schema**
- `recipes` - Recipe storage with ingredients and instructions
- `meals` - Planned meals with dates
- `items` - Pantry items and grocery items
- `settings` - User preferences

### **Demo Data**
```bash
npm run demo:generate  # Generate realistic test data
npm run demo:refresh   # Refresh demo data
npm run demo:large     # Generate large dataset
```

---

## 🤝 **Contributing**

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Follow the established patterns (see [PWA guides](../peadoubleueh/project-docs/))
4. Write tests for new features
5. Run `npm run test:all` to verify
6. Commit changes (`git commit -m 'feat: Add amazing feature'`)
7. Push to branch (`git push origin feature/amazing-feature`)
8. Open a Pull Request

---

## 📄 **License**

This project is licensed under the ISC License - see the [LICENSE](LICENSE) file for details.

---

## 🔗 **Related Projects**

- **[PWA Template](../peadoubleueh/)** - Base PWA template with all best practices
- **[CannonPop](../CannonPop/)** - Bubble shooter game PWA
- **[Giffer](../Giffer/)** - Video to GIF converter PWA
- **[Port Registry](../peadoubleueh/PORT_REGISTRY.md)** - Multi-PWA port management

---

## 📖 **Documentation**

- **User Manual**: [project-docs/USER_MANUAL.md](project-docs/USER_MANUAL.md)
- **Deployment**: [project-docs/DEPLOYMENT.md](project-docs/DEPLOYMENT.md)
- **Testing Strategy**: [project-docs/TESTING_STRATEGY.md](project-docs/TESTING_STRATEGY.md)
- **Known Issues**: [project-docs/KNOWN_ISSUES.md](project-docs/KNOWN_ISSUES.md)

---

**Built with ❤️ for offline-first meal planning**

*Implements advanced PWA patterns learned from real-world production deployments, focusing on mobile-first design, offline capabilities, and comprehensive testing.*
