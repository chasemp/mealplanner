# ğŸ½ï¸ MealPlanner - Smart Meal Planning PWA

A modern, offline-first Progressive Web App for meal planning with local SQLite storage, recipe management, and smart rotation features.

## ğŸš€ **Live Demo**
**[https://mealplanner.523.life/](https://mealplanner.523.life/)** - Full-featured PWA

ğŸ“± **Offline-First** â€¢ ğŸ—„ï¸ **Local SQLite Database** â€¢ âš¡ **Zero Backend Dependencies**

---

## âœ¨ **Features**

### ğŸ¯ **Core Features**
- **Meal Planning** - Plan meals for weeks or months ahead
- **Recipe Management** - Store and organize your favorite recipes
- **Smart Rotation** - Intelligent meal rotation engine
- **Grocery Lists** - Auto-generated shopping lists from meal plans
- **Pantry Management** - Track items you have on hand
- **Barcode Scanner** - Quick item entry (PWA-enabled)
- **Calendar View** - Visual meal planning interface
- **Itinerary View** - Day-by-day meal schedules

### ğŸ“± **PWA Features**
- **100% Offline** - Works completely offline with service worker
- **Local Database** - SQLite via sql.js (no server required)
- **Installable** - Add to home screen on any device
- **Fast & Responsive** - Optimized for mobile and desktop
- **Export/Import** - Backup and restore your data

### ğŸ—ï¸ **Technical Features**
- **SQL.js Integration** - Full SQLite in the browser (WebAssembly)
- **Demo Data System** - Realistic test data for development
- **Comprehensive Testing** - Unit, integration, and E2E tests
- **Mobile-First Design** - Touch-optimized interface
- **Conditional Logging** - Silent in production

---

## ğŸ **Quick Start**

### **Development**
```bash
# Install dependencies
npm install

# Start development server (port 3004)
npm run dev

# Open browser
open http://localhost:3004
```

### **Production**
```bash
# Build for production
npm run build

# Preview production build
npm run preview

# Deploy (just push to main)
git add -A
git commit -m "feat: your changes"
git push origin main  # Auto-deploys to mealplanner.523.life
```

### **Port Management**
```bash
# Check assigned port
npm run port

# Check if port 3004 is free
npm run port:check

# Kill process on port 3004
npm run port:kill

# Force restart (kill + start)
npm run port:force
```

---

## ğŸ“‚ **Project Structure**

Following the `/src` â†’ `/docs` deployment pattern ([see guide](../peadoubleueh/project-docs/DEPLOYMENT_ARCHITECTURE.md)):

```
MealPlanner/
â”œâ”€â”€ src/                  # Source code (edit here)
â”‚   â”œâ”€â”€ index.html        # Main app entry
â”‚   â”œâ”€â”€ sw.js             # Service worker
â”‚   â”œâ”€â”€ js/               # JavaScript modules
â”‚   â”‚   â”œâ”€â”€ main.js       # App entry point
â”‚   â”‚   â”œâ”€â”€ meal-manager.js
â”‚   â”‚   â”œâ”€â”€ recipe-manager.js
â”‚   â”‚   â”œâ”€â”€ grocery-list-manager.js
â”‚   â”‚   â””â”€â”€ [15+ more modules]
â”‚   â”œâ”€â”€ components/       # Reusable components
â”‚   â”œâ”€â”€ database/         # SQLite schema & storage
â”‚   â”œâ”€â”€ utils/            # Utilities (Logger, EventHelper)
â”‚   â”œâ”€â”€ styles/           # CSS files
â”‚   â””â”€â”€ test/             # Test files
â”‚       â”œâ”€â”€ unit/
â”‚       â”œâ”€â”€ integration/
â”‚       â”œâ”€â”€ regression/
â”‚       â””â”€â”€ e2e/
â”‚
â”œâ”€â”€ public/               # Static assets (copied to build)
â”‚   â”œâ”€â”€ manifest.json     # PWA manifest
â”‚   â””â”€â”€ CNAME             # Custom domain config
â”‚
â”œâ”€â”€ docs/                 # Build output (auto-generated)
â”‚   â””â”€â”€ [Built files]     # GitHub Pages serves from here
â”‚
â”œâ”€â”€ project-docs/         # Project documentation
â”‚   â”œâ”€â”€ DEPLOYMENT.md
â”‚   â”œâ”€â”€ TESTING_STRATEGY.md
â”‚   â”œâ”€â”€ USER_MANUAL.md
â”‚   â””â”€â”€ [8 more docs]
â”‚
â”œâ”€â”€ vite.config.js        # Vite build configuration
â”œâ”€â”€ package.json          # Dependencies and scripts
â””â”€â”€ README.md             # This file
```

### **âš ï¸ Critical Rules**
1. **NEVER edit `/docs` directly** - it's auto-generated by `npm run build`
2. **Always edit source files** in `/src` or `/public`
3. **GitHub Pages** automatically serves from `/docs` on push to main
4. **No GitHub Actions needed** - simple push deployment

---

## ğŸ› ï¸ **Technology Stack**

- **Frontend**: Vanilla JavaScript (modular architecture)
- **Database**: [SQL.js](https://github.com/sql-js/sql.js/) - SQLite compiled to WebAssembly
- **Styling**: Tailwind CSS (compiled)
- **Build Tool**: [Vite](https://vitejs.dev/) - Fast dev server and optimized builds
- **Testing**: 
  - [Vitest](https://vitest.dev/) - Unit & integration tests
  - [Playwright](https://playwright.dev/) - E2E testing
- **PWA**: Service Worker + Web App Manifest
- **Deployment**: GitHub Pages - Simple static hosting

---

## ğŸ§ª **Testing**

### **Run Tests**
```bash
# All tests
npm test

# Unit tests only
npm run test:run

# Core functionality tests
npm run test:core

# E2E tests
npm run test:e2e

# E2E with UI
npm run test:e2e:ui

# Full test suite
npm run test:all
```

### **Test Structure**
- **Unit Tests** - Individual module testing (`src/test/unit/`)
- **Integration Tests** - Component interaction (`src/test/integration/`)
- **Regression Tests** - Prevent known bugs (`src/test/regression/`)
- **E2E Tests** - Full workflow testing (`src/test/e2e/`)

### **Pre-Commit Hook**
- Automatically runs critical regression tests
- Prevents breaking changes
- Setup: `npm run hooks:setup`

---

## ğŸ”§ **Development Workflow**

### **1. Make Changes**
Edit files in `/src`:
- Main app logic: `/src/js/*.js`
- Database: `/src/database/*.js`
- Components: `/src/components/*.js`
- Styles: `/src/styles/*.css`

### **2. Test Locally**
```bash
npm run dev  # http://localhost:3004
```

### **3. Run Tests**
```bash
npm run test:core  # Quick core tests
npm run test:all   # Full test suite
```

### **4. Build for Production**
```bash
npm run build  # Outputs to /docs
```

### **5. Deploy**
```bash
git add -A
git commit -m "feat: your feature"
git push origin main  # Live at mealplanner.523.life
```

---

## ğŸ“š **PWA Best Practices**

This project follows PWA best practices from [peadoubleueh/project-docs](../peadoubleueh/project-docs/):

âœ… **Offline-First** - Service worker caching  
âœ… **Local Database** - SQL.js for offline data  
âœ… **Mobile-First** - Touch-optimized design  
âœ… **Page-Based Navigation** - Better UX than modals  
âœ… **Conditional Logging** - Logger utility (silent in production)  
âœ… **Port Management** - No conflicts with other PWAs  
âœ… **Comprehensive Testing** - Unit, integration, E2E  

See the [PWA Development Lessons](../peadoubleueh/project-docs/PWA_DEVELOPMENT_LESSONS.md) for complete guidance.

---

## ğŸ“Š **Database**

### **SQLite via SQL.js**
- **Completely offline** - No server required
- **Fast queries** - WebAssembly performance
- **Full SQL** - Complete SQLite feature set
- **Portable** - Export/import your data

### **Schema**
- `recipes` - Recipe storage with ingredients and instructions
- `meals` - Planned meals with dates
- `items` - Pantry items and grocery items
- `settings` - User preferences

### **Demo Data**
```bash
npm run demo:generate  # Generate realistic test data
npm run demo:refresh   # Refresh demo data
npm run demo:large     # Generate large dataset
```

---

## ğŸ¤ **Contributing**

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Follow the established patterns (see [PWA guides](../peadoubleueh/project-docs/))
4. Write tests for new features
5. Run `npm run test:all` to verify
6. Commit changes (`git commit -m 'feat: Add amazing feature'`)
7. Push to branch (`git push origin feature/amazing-feature`)
8. Open a Pull Request

---

## ğŸ“„ **License**

This project is licensed under the ISC License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ”— **Related Projects**

- **[PWA Template](../peadoubleueh/)** - Base PWA template with all best practices
- **[CannonPop](../CannonPop/)** - Bubble shooter game PWA
- **[Giffer](../Giffer/)** - Video to GIF converter PWA
- **[Port Registry](../peadoubleueh/PORT_REGISTRY.md)** - Multi-PWA port management

---

## ğŸ“– **Documentation**

- **User Manual**: [project-docs/USER_MANUAL.md](project-docs/USER_MANUAL.md)
- **Deployment**: [project-docs/DEPLOYMENT.md](project-docs/DEPLOYMENT.md)
- **Testing Strategy**: [project-docs/TESTING_STRATEGY.md](project-docs/TESTING_STRATEGY.md)
- **Known Issues**: [project-docs/KNOWN_ISSUES.md](project-docs/KNOWN_ISSUES.md)

---

**Built with â¤ï¸ for offline-first meal planning**

*Implements advanced PWA patterns learned from real-world production deployments, focusing on mobile-first design, offline capabilities, and comprehensive testing.*
